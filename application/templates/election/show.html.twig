{% extends 'base.html.twig' %}

{% block title %}Election{% endblock %}

{% block body %}
    <h1>Election</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ election.id }}</td>
            </tr>
            <tr>
                <th>Season</th>
                <td>{{ election.season.name }}</td>
            </tr>
            <tr>
                <th>Start Date</th>
                <td>{{ election.startDate ? election.startDate|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>End Date</th>
                <td>{{ election.endDate ? election.endDate|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>Results</th>
                <td>
{#                    {{ dump(votesInfo) }}#}
                    <table class="table">
                        <thead>
                        <tr>
                            <th class="col-md-9">Show</th>
                            <th class="col-md-1 text-end">Votes</th>
                            <th class="col-md-2 text-end">% of Total</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for voteTally in voteTallies %}
                            <tr>
                                <td class="col-md-9">
                                    {{ voteTally.getShowJapaneseTitle }}
                                    ({{ voteTally.getShowFullJapaneseTitle }})<br>
                                    {{ voteTally.getShowEnglishTitle }}
                                </td>
                                <td class="col-md-1 text-end">
                                    {{ voteTally.getVoteCount }}
                                </td>
                                <td class="col-md-2 text-end">
                                    {{ voteTally.getVotePercentOfTotal|round(1) }}%
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="float-end">
        {{ include('election/_delete_form.html.twig') }}
    </div>

    <a class="btn btn-light" href="{{ path('admin_election_index') }}">Back to list</a>

    <a class="btn btn-secondary" href="{{ path('admin_election_edit', {'id': election.id}) }}">Edit</a>

{% endblock %}
